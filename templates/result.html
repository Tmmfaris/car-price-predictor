<!DOCTYPE html>
<html>
<head>
<title>Prediction Result</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
font-family:Poppins;
background:#0b1220;
color:white;
}

.card-result{
background:#111827;
padding:40px;
border-radius:18px;
box-shadow:0 15px 40px rgba(0,0,0,.6);
}

.price{
font-size:44px;
font-weight:700;
color:#ffcc33;
}

.gauge-wrap{
width:220px;
margin:auto;
position:relative;
}

.gauge-text{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
font-size:28px;
font-weight:700;
color:#ffcc33;
}

</style>
</head>

<body>

<div class="container mt-5">

<div class="card-result text-center">

<h3>ðŸš— Prediction Result</h3>

<p class="text-secondary">
Best Model: {{ model_name | default("Model") }}
</p>

<div class="price">
â‚¹ {{ prediction | default("0") }} Lakhs
</div>

<div class="alert alert-dark mt-3">
Estimated Market Range<br>
â‚¹ {{ low | default("0") }} â€” â‚¹ {{ high | default("0") }} Lakhs
</div>

<h5 class="mt-4">Confidence Meter</h5>

<div class="gauge-wrap">
<canvas id="gauge"></canvas>
<div class="gauge-text">
{{ confidence | default(0) }}%
</div>
</div>

<a href="/" class="btn btn-warning mt-4">
Predict Another Vehicle
</a>

</div>
</div>

<script>

/* ---- SAFE confidence value ---- */
const val = Number("{{ confidence | default(0) }}") || 0;

const ctx = document.getElementById("gauge");

if (ctx) {
new Chart(ctx, {
type: 'doughnut',
data: {
datasets: [{
data: [val, 100 - val],
backgroundColor: ["#ffcc33","#1f2937"],
borderWidth: 0
}]
},
options: {
rotation: -90,
circumference: 180,
cutout: "75%",
plugins: {
legend: {display:false},
tooltip: {enabled:false}
},
animation:{duration:1400}
}
});
}

</script>

</body>
</html>
